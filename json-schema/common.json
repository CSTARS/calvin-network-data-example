{
    "id":"http://watershed.ice.ucdavis.edu/json-schema/common.json",
    "title": "Common Schema Objects",
    "oneOf" : [
	{"$ref":"#/external"},
	{"$ref":"#/prmname_list"},
	{"$ref":"#/reference"},
	{"$ref":"#/tuple/date_capacity"},
	{"$ref":"#/tuple/month_capacity"},
	{"$ref":"#/table/date_capacity"},
	{"$ref":"#/table/month_capacity"},
	{"$ref":"#/network"}
    ],
    "external":{
	"description":"This is the generic pointer to an external file.  We currently use external links to hold tabular data in seperate CSV files.",
	"type":"object",
	"properties":{
	    "$ref":{"type":"string"}
	},
	"required":["$ref"],
	"additionalProperties":false
    },
    "prmname_list": {
	"description":"An array of prmnames",
	"oneOf":[
	    {"type":"null"},
	    {"$ref":"#/external"},
	    {"type":"array", "items": {"$ref":"types.json#/prmname"} }
	]
    },
    "reference":{
	"id": "reference.json",
	"description":"Some common reference information",
	"properties":{
	    "description": {
		"type" : "string",
		"description" : "A description of the object.  Can be markdown."
	    },
	    "citation" : {
		"type" : "string",
		"description" : "Should be a Mendelay Citation, (for now)",
		"format" : "uri"
	    }
	}
    },
    "tuple": {
	"date_capacity":{
	    "title":"Date,Capacity Tuple",
	    "description":"A tuple of for [date,flow], where date is (YYYY-MM-DD) specified date and flow is specified in KAF.",
	    "type":"array",
	    "items":[
		{"$ref":"types.json#/date" },
		{"$ref":"types.json#/capacity" }
	    ]
	},
	"month_capacity":{
	    "title":"Month,Capacity Tuple",
	    "description":"A tuple of for [date,flow], where date is (YYYY-MM-DD) specified date and flow is specified in KAF.",
	    "type":"array",
	    "items":[
		{"$ref":"types.json#/month" },
		{"$ref":"types.json#/capacity" }
	]
	}
    },
    "table": {
	"date_capacity": {
	    "title":"Date,Capacity Table",
	    "type":"array",
	    "items":{"$ref":"#/tuple/date_capacity"}
	},
	"month_capacity": {
	    "title":"Month,Capacity Table",
	    "type":"array",
	    "items":{"$ref":"#/tuple/month_capacity"}
	}
    },
    "network" : {
	"description": "Common items of a network item",
	"type": "object",
	"properties" : {
	    "prmname": { "$ref":"types.json#/prmname" },
	    "inflows": {
		"oneOf":[
		    { "type":"null" },
		    {
			"type":"object",
			"description":"A set of inflows, specified by identifier.",
			"patternProperties" : {
			    "^([a-z]|[A-Z]|[0-9])+$" : {"$ref":"inflow.json"}
			}
		    }
		    ]
	    },
	    "cost" : {
		"type":"object",
		"description":"Set of costs by identifier.",
		"patternProperties" : {
		    "^[a-z]+$" : {"$ref":"cost.json"}
		}
	    }
	},
	"required":["prmname"]
    }
}
